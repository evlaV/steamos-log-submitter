SteamOS Log Submitter D-Bus API
===============================

SteamOS Log Submitter has a D-Bus-based API for management of the behavior of
the daemon as it's running. The service claims the bus name
`com.steampowered.SteamOSLogSubmitter` on the system bus, and all objects are
under the `/com/steampowered/SteamOSLogSubmitter` path. The following objects
are defined

## Manager

The manager handles central behavior of the daemon, such as enable or inhibit
state, triggering collection and submission, and various nuances therein.

There is only one manager object, located at the path:
`/com/steampowered/SteamOSLogSubmitter/Manager`

It implements one interface, `com.steampowered.SteamOSLogSubmitter.Manager`,
which has the following methods and properties:

### Methods

- `ListPending`: Takes no argument, returns `as` value. Get a list of currently
  pending log files that have yet to be submitted. The format is
  `[helper]/[logfile]`.
- `Log`: Takes `dsus` arguments (`timestamp`, `module`, `level`, `message`),
  has no return value. Logs a message in the daemon's log. Used for forwarding
  log records from an out-of-process hook, and should not be used otherwise.
- `Shutdown`: Takes no arguments, has no return value. Tell the daemon to
  gracefully stop.
- `Trigger`: Takes no arguments, has no return value. Trigger collection and
  submission if enabled, otherwise do nothing. Waits for the process to finish.
- `TriggerAsync`: Takes no arguments, has no return value. Trigger collection
  and submission if enabled, otherwise do nothing. Does not wait for the
  process to finish.

### Properties

- `CollectEnabled` (`b`): Whether or not the collection phase is enabled. If
  this is disabled, helpers that require the collection phase to collect or
  generate logs for submission will not be polled for collection, and only
  submit logs that are ready (if the submission phase is enabled, see below).
- `Enabled` (`b`): Whether or not collection and submission are enabled at the
  global level. There is more fine-grained control at a lower level, but if
  this is false, the daemon does nothing.
- `Inhibited` (`b`): Whether or not the daemon should temporarily refrain from
  collecting and submitting logs. Useful for when a game is running and
  background activity should be minimized, without having to worry about the
  current value of `Enabled`.
- `LogLevel` (`u`): How verbose SLS's internal logging should be. Possible
  levels are taken from the Python `logging` module, and correspond to the
  values of the constants, from least verbose to most, `CRITICAL`, `ERROR`,
  `WARNING`, `INFO`, `DEBUG`.
- `SubmitEnabled` (`b`): Whether or not the submission phase is enabled. If
  this is disabled, logs that are pending submission will not be submitted and
  will be retained locally instead. Note that pending logs will expire (by
  default after 2 weeks) so this should be used with caution.
- `UnitId` (`s`): An opaque identifier unique to the device running the daemon.
  This is used to link issues generated by the same device without providing
  any information about the device (e.g. serial number) to the remote server.
- `Version` (`s`): A read-only property containing the version of the currently
  running daemon.

## Helpers

Helpers manage collection and submission processes for specific categories of
log, as documented in the README.md file.

There is one helper object per helper module, located under the path:
`/com/steampowered/SteamOSLogSubmitter/helpers`

For example, the "minidump" module would be located at this path:
`/com/steampowered/SteamOSLogSubmitter/helpers/Minidump`

They implement one interface, `com.steampowered.SteamOSLogSubmitter.Helper`,
which has the following methods and properties:

### Methods

- `ListPending`: Takes no argument, returns `as` value. Get a list of currently
  pending log files that have yet to be submitted. The format is just the
  filename, as the helper name is implicit.
- `Collect`: Takes no arguments, returns `b` value. Run the submission phase
  for this helper. Returns `true` if one or more new logs are ready for
  submission.

### Properties

- `CollectEnabled` (`b`): Whether or not the collection phase is enabled. If
  this is disabled, helpers that require the collection phase to collect or
  generate logs for submission will not be polled for collection, and only
  submit logs that are ready (if the submission phase is enabled, see below).
- `Enabled` (`b`): Whether or not collection and submission are enabled at the
  helper level. If disabled, neither the collection nor submission phases will
  run for this helper.
- `SubmitEnabled` (`b`): Whether or not the submission phase is enabled. If
  this is disabled, logs that are pending submission will not be submitted and
  will be retained locally instead. Note that pending logs will expire (by
  default after 2 weeks) so this should be used with caution.

### Sysinfo helper

The sysinfo helper gathers several different types of information about the
running system for telemetry purposes. Some of this information may be useful
for other programs and can be exported by using objects located under the path:
`/com/steampowered/SteamOSLogSubmitter/helpers/Sysinfo`

They implement one interface, `com.steampowered.SteamOSLogSubmitter.Sysinfo`,
which has the following methods and properties:

#### Methods

- `GetJson`: Takes no arguments, returns `s` value. Get the information
  associated with this information type and return it in JSON format.

### Properties

- `Enabled` (`b`): Whether or not this type of system information should be
  collected and submitted.
